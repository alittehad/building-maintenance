<!-- index.html -->
<!DOCTYPE html>
<html>
<head>
  <title>Login - Building Maintenance</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
  <script src="firebase-config.js"></script>
  <script>
    firebase.auth().onAuthStateChanged(user => {
      if (user) window.location.href = 'home.html';
    });
    function login() {
      const provider = new firebase.auth.GoogleAuthProvider();
      firebase.auth().signInWithPopup(provider).then(() => {
        window.location.href = 'home.html';
      });
    }
  </script>
</head>
<body>
  <h2>Welcome to Building Maintenance</h2>
  <button onclick="login()">ğŸ” Login with Google</button>
</body>
</html>

<!-- firebase-config.js -->
const firebaseConfig = {
  apiKey: "AIzaSyAHGIUaN2JMIXB7HuCM4BjXA97E0bvWYDA",
  authDomain: "al-ittehad-575a0.firebaseapp.com",
  databaseURL: "https://al-ittehad-575a0-default-rtdb.firebaseio.com",
  projectId: "al-ittehad-575a0",
  storageBucket: "al-ittehad-575a0.appspot.com",
  messagingSenderId: "797238238041",
  appId: "1:797238238041:web:89f2aa5c786c59dc374a48"
};
firebase.initializeApp(firebaseConfig);

<!-- home.html -->
<!DOCTYPE html>
<html>
<head>
  <title>Home</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
  <script src="firebase-config.js"></script>
</head>
<body>
  <h2>ğŸ¢ Building Maintenance Dashboard</h2>
  <div id="notice" class="scrolling"></div>
  <div id="buttons">
    <button onclick="location.href='room.html'">ğŸ” View My Room</button>
    <button onclick="location.href='admin.html'" id="adminBtn" style="display:none">ğŸ›  Admin Panel</button>
    <button onclick="logout()">ğŸšª Logout</button>
  </div>
  <div id="complaints"></div>

  <script>
    firebase.auth().onAuthStateChanged(user => {
      if (!user) return location.href = 'index.html';
      if (user.email === "ngogrant454@gmail.com") {
        document.getElementById("adminBtn").style.display = "inline-block";
      }

      firebase.database().ref("notices").on("value", snap => {
        const data = snap.val();
        let scrollHtml = '';
        for (let key in data) scrollHtml += `<p>ğŸ“¢ ${data[key].date}: ${data[key].text}</p>`;
        document.getElementById("notice").innerHTML = scrollHtml;
      });

      firebase.database().ref("complaints").on("value", snap => {
        const data = snap.val();
        let html = '';
        for (let key in data) {
          const c = data[key];
          html += `
            <div class="card">
              <h4>ğŸ  Room: ${c.room}</h4>
              <p>ğŸ‘¤ Name: ${c.name}</p>
              <p>${c.text}</p>
              ${c.img ? `<img src="${c.img}" width="100%">` : ""}
              <small>ğŸ“… ${c.date}</small>
            </div>`;
        }
        document.getElementById("complaints").innerHTML = html;
      });
    });

    function logout() {
      firebase.auth().signOut().then(() => location.href = 'index.html');
    }
  </script>
</body>
</html>

<!-- room.html -->
<!DOCTYPE html>
<html>
<head><title>Post Complaint</title></head>
<body>
  <input type="text" id="room" placeholder="Room No">
  <input type="text" id="name" placeholder="Your Name">
  <textarea id="complaint"></textarea>
  <input type="file" id="imageInput">
  <button onclick="submitComplaint()">Post</button>

  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
  <script src="firebase-config.js"></script>
  <script>
    function submitComplaint() {
      const room = document.getElementById("room").value;
      const name = document.getElementById("name").value;
      const text = document.getElementById("complaint").value;
      const file = document.getElementById("imageInput").files[0];
      const date = new Date().toLocaleString();

      if (file) {
        const reader = new FileReader();
        reader.onloadend = function () {
          const base64Image = reader.result.replace(/^data:image\/\w+;base64,/, "");
          fetch("https://api.imgbb.com/1/upload?key=50efc7f1c214fcb8a10324ee7256f9f4", {
            method: "POST",
            body: new URLSearchParams({ image: base64Image })
          })
          .then(res => res.json())
          .then(res => saveComplaint(room, name, text, res.data.url, date));
        };
        reader.readAsDataURL(file);
      } else {
        saveComplaint(room, name, text, "", date);
      }
    }

    function saveComplaint(room, name, text, img, date) {
      firebase.database().ref("complaints").push({ room, name, text, img, date });
      alert("Complaint posted!");
    }
  </script>
</body>
</html>

<!-- style.css -->
body { font-family: Arial; margin: 20px; }
button {
  background: linear-gradient(to right, #1e3c72, #2a5298);
  color: white;
  padding: 10px 20px;
  border: none;
  border-radius: 10px;
  box-shadow: 0 4px 6px rgba(0,0,0,0.2);
  transition: 0.3s;
}
button:hover { transform: scale(1.05); }
.card {
  background: #f9f9f9;
  border-radius: 15px;
  padding: 20px;
  margin: 10px 0;
  box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}
.scrolling {
  height: 60px;
  overflow: hidden;
  position: relative;
  margin-bottom: 20px;
}
.scrolling p {
  position: absolute;
  animation: scroll-up 10s linear infinite;
}
@keyframes scroll-up {
  0% { top: 100%; }
  100% { top: -100%; }
}
